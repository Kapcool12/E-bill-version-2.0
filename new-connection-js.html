<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBill Signup</title>
    <!-- Bootstrap CSS -->
    <link href="../bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-image: url('../image/new-image.png'); /* Replace with your actual image path */
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            margin: 0;
            padding: 0;
        }
        .navbar .nav-link.btn {
            margin-left: 0.5rem;
        }
        .card-header {
            color: #fff;
        }
    </style>
</head>
<body class="bg-light">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
        <div class="container">
            <a class="navbar-brand" href="#">eBill Bill Payment</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link btn btn-warning text-dark" href="../E-bill Help/help.html">Help</a>
                    </li>
                    <li class="nav-item align-items-end">
                        <a class="nav-link btn btn-danger text-white" href="../E-bill Login-Page/login.html">Log Out</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Signup Form -->
    <div class="container mt-5">
        <div class="back-button">
            <a href="javascript:history.back()" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Back</a>
        </div>
        <h1 class="text-center mb-4">Application for New Electricity Connection</h1>
        <div class="card">
            <div class="card-header bg-primary">
                <h4 class="mb-0">New Application Form</h4>
            </div>
            <div class="card-body">
                <form id="signupForm" action="" method="POST">
                    <div class="row">
                        <div class="col-md-6">
                            <!-- Personal Information -->
                            <h5>Personal Information</h5>
                            <div class="form-group mb-3">
                                <label for="name">Name</label>
                                <input type="text" class="form-control" id="name" name="name" disabled>
                            </div>
                            <div class="form-group mb-3">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" id="email" name="email" disabled>
                            </div>
                            <div class="form-group mb-3">
                                <label for="mobile">Mobile</label>
                                <input type="tel" class="form-control" id="mobile" name="mobile" required>
                                <div class="invalid-feedback">Please enter a valid 10-digit mobile number.</div>
                            </div>
                            <div class="form-group mb-3">
                                <label for="gender">Gender</label>
                                <select class="form-control" id="gender" name="gender">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group mb-3">
                                <label for="income">Income</label>
                                <input type="text" class="form-control" id="income" name="income">
                            </div>
                            <!-- Connection Information -->
                            <h5>Connection Information</h5>
                            <div class="form-group mb-3">
                                <label for="connection_type">Connection Type</label>
                                <select class="form-control" id="connection_type" name="connection_type" required>
                                    <option value="residential">Residential</option>
                                    <option value="commercial">Commercial</option>
                                </select>
                                <div class="invalid-feedback">Please select a connection type.</div>
                            </div>
                            <!-- Document Section -->
                            <h5>Documents</h5>
                            <div class="form-group mb-3">
                                <label for="document">Upload Document</label>
                                <input type="file" class="form-control" id="document" name="document" required>
                                <div class="invalid-feedback">Please upload a document.</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!-- Address Information -->
                            <h5>Address Information</h5>
                            <div class="form-group mb-3">
                                <label for="address">Address</label>
                                <input type="text" class="form-control" id="address" name="address" required>
                                <div class="invalid-feedback">Please enter your address.</div>
                            </div>
                            <div class="form-group mb-3">
                                <label for="city">City</label>
                                <input type="text" class="form-control" id="city" name="city" required>
                                <div class="invalid-feedback">Please enter your city.</div>
                            </div>
                            <div class="form-group mb-3">
                                <label for="country">Country</label>
                                <input type="text" class="form-control" id="country" name="country" required>
                                <div class="invalid-feedback">Please enter your country.</div>
                            </div>
                            <div class="form-group mb-3">
                                <label for="pin-code">Pin-code</label>
                                <input type="text" class="form-control" id="pin-code" name="pin-code" required>
                                <div class="invalid-feedback">Please enter your pin-code.</div>
                            </div>
                            <!-- Optional Information -->
                            <h5>Optional Information</h5>
                            <div class="form-group mb-3">
                                <label for="previous_provider">Previous Provider (if any)</label>
                                <input type="text" class="form-control" id="previous_provider" name="previous_provider">
                            </div>
                            <div class="form-group mb-3">
                                <label for="occupation">Occupation</label>
                                <input type="text" class="form-control" id="occupation" name="occupation">
                            </div>
                            <div class="form-group mb-3">
                                <label for="education">Education</label>
                                <input type="text" class="form-control" id="education" name="education">
                            </div>
                            <div class="form-group mb-3">
                                <label for="marital_status">Marital Status</label>
                                <select class="form-control" id="marital_status" name="marital_status">
                                    <option value="single">Single</option>
                                    <option value="married">Married</option>
                                    <option value="divorced">Divorced</option>
                                    <option value="widowed">Widowed</option>
                                </select>
                            </div>
                            
                        </div>
                    </div>
                    <div class="text-center mt-4 mb-4">
                        <button type="submit" class="btn btn-primary btn-lg btn-block">Apply</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript for Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Autofill Name and Email from localStorage
            const userData = JSON.parse(localStorage.getItem('user'));
            if (userData) {
                document.getElementById('name').value = userData.firstName;
                document.getElementById('email').value = userData.email;
            }
        });

        document.getElementById('signupForm').addEventListener('submit', function(event) {
            event.preventDefault();
            let isValid = true;

            const name = document.getElementById('name');
            const email = document.getElementById('email');
            const mobile = document.getElementById('mobile');
            const connectionType = document.getElementById('connection_type');
            const address = document.getElementById('address');
            const city = document.getElementById('city');
            const country = document.getElementById('country');
            const pinCode = document.getElementById('pin-code');
            const documentField = document.getElementById('document');

            // Reset validation classes and messages
            [mobile, connectionType, address, city, country, pinCode, documentField].forEach(field => {
                field.classList.remove('is-invalid');
            });

            // Validate Mobile
            if (!mobile.value || !/^\d{10}$/.test(mobile.value)) {
                mobile.classList.add('is-invalid');
                isValid = false;
            }

            // Validate Connection Type
            if (!connectionType.value) {
                connectionType.classList.add('is-invalid');
                isValid = false;
            }

            // Validate Address
            if (!address.value) {
                address.classList.add('is-invalid');
                isValid = false;
            }

            // Validate City
            if (!city.value) {
                city.classList.add('is-invalid');
                isValid = false;
            }

            // Validate Country
            if (!country.value) {
                country.classList.add('is-invalid');
                isValid = false;
            }

            // Validate Pin Code
            if (!pinCode.value || !/^\d{6}$/.test(pinCode.value)) {
                pinCode.classList.add('is-invalid');
                isValid = false;
            }

            // Validate Document
            if (!documentField.files.length) {
                documentField.classList.add('is-invalid');
                isValid = false;
            }

            if (isValid) {
                const formData = {
                    name: name.value,
                    email: email.value,
                    mobile: mobile.value,
                    connectionType: connectionType.value,
                    address: address.value,
                    city: city.value,
                    country: country.value,
                    pinCode: pinCode.value,
                    previousProvider: document.getElementById('previous_provider').value,
                    income: document.getElementById('income').value,
                    occupation: document.getElementById('occupation').value,
                    education: document.getElementById('education').value,
                    gender: document.getElementById('gender').value,
                    maritalStatus: document.getElementById('marital_status').value,
                    date: new Date().toLocaleDateString(),
                    status: 'Pending'
                };

                // Store form data in localStorage under applications
                const applications = JSON.parse(localStorage.getItem('applications')) || [];
                applications.push(formData);
                localStorage.setItem('applications', JSON.stringify(applications));

                // Display success message or proceed with form submission
                alert('Application submitted successfully!');
                // Optionally, redirect to another page
                // window.location.href = 'success.html';
            }
        });
    </script>
</body>
</html>


